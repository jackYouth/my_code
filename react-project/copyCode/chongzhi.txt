         
 
 
 
 chongzhi/components/app.js 
 
import React from 'react'
import { UserCenter } from '@boluome/oto_saas_web_app_component'

import Huafei from '../../huafei/containers/Huafei.js'
import Liuliang from '../../liuliang/containers/Liuliang.js'

import '../styles/app.scss'


  // <NoticeBar style={{ background: '#fffad8' }} icon={<Icon type={ require('svg/chongzhi/notice.svg') } size="md" />} marqueeProps={{ style: { color: '#333333', marginLeft: '.19rem' } }}>
  //   服务商维护如遇无法充值，请稍后再试
  // </NoticeBar>

const App = ({ handleCZClick, currentCZ = 0, curPhone, prevPhone }) => {
  const activeStyle = {
    borderColor: '#ffab00',
    color:       '#ffab00',
  }
  // const
  return (
    <div>
      <UserCenter categoryCode='chongzhi' orderTypes='huafei,liuliang' />
      <ul className='title'>
        <li style={ currentCZ === 0 ? activeStyle : {} } onClick={ () => currentCZ === 1 && handleCZClick([0, curPhone]) }>话费</li>
        <li style={ currentCZ === 1 ? activeStyle : {} } onClick={ () => currentCZ === 0 && handleCZClick([1, curPhone]) }>流量</li>
      </ul>
      <div>
        {
          currentCZ === 0 && <Huafei prevPhone={ prevPhone } />
        }
        {
          currentCZ === 1 && <Liuliang prevPhone={ prevPhone } />
        }
      </div>
    </div>
  )
}

export default App
         
 
 
 
 chongzhi/components/rooter.js 
 
// 加载父路由组件

import React      from 'react'
import customize from 'customize'

const root = ({ children }) => (
  <div>
    { children }
  </div>
)

export default customize(root)
         
 
 
 
 chongzhi/containers/app.js 
 
import { connect } from 'react-redux'

import App from '../components/app'

const mapStateToProps = ({ app, huafei, liuliang }) => ({ ...app, ...huafei, ...liuliang })

const mapDispatchToProps = dispatch => {
  return {
    dispatch,
    handleCZClick: e => {
      dispatch({ type: 'SET_CZ', currentCZ: e[0] })
      dispatch({ type: 'SET_CURRENT_PHONE', prevPhone: e[1] })
    },
  }
}

export default
  connect(mapStateToProps, mapDispatchToProps)(App)
         
 
 
 
 chongzhi/index.js 
 
import React      from 'react'
import { render } from 'react-dom'
import Root       from './root'

render(<Root />, document.querySelector('#root'))
         
 
 
 
 chongzhi/reducers/app.js 
 
import { mergeState } from '@boluome/common-lib'

const initialState = {
  title: 'chongzhi',
}

const app = (state = initialState, action) => {
  switch (action.type) {
    case 'SET_CZ':
    case 'SET_CURRENT_PHONE':
      return mergeState(state, action)
    default: return state
  }
}

export default app
         
 
 
 
 chongzhi/reducers/index.js 
 
import { combineReducers } from 'redux'
// 引入reducers
import app  from './app'
import huafei from '../../huafei/reducers/huafei'
import liuliang from '../../liuliang/reducers/liuliang'

// 组合reducers
export default combineReducers({
  app, huafei, liuliang,
})
         
 
 
 
 chongzhi/root.js 
 
import React from 'react'
import { Router, Route, browserHistory, IndexRoute } from 'react-router'
import { createStore, applyMiddleware } from 'redux'
import { Provider } from 'react-redux'
import thunk        from 'redux-thunk'
import reducers     from './reducers'

// 由Reducers创建状态树
const store = createStore(reducers, applyMiddleware(thunk))
// 定义根组件
const Root = () => (<Provider store={ store }><Routes /></Provider>)

export default Root

// 路由配置
const Routes = () => (
  <Router history={ browserHistory } >
    <Route path='/chongzhi' component={ require('react-router?name=root!./components/rooter') } >
      <IndexRoute component={ require('react-router?name=app!./containers/app') } />
    </Route>
  </Router>
)
         
 
 
 
 chongzhi/styles/app.scss 
 
.title{
  border-bottom: 1px solid #e5e5e5;
  overflow: hidden;
  li{
    float: left;
    text-align: center;
    width: 50%;
    line-height: 86px;
    border-bottom: 4px solid #fff;
    color: #333333;
    font-size: 28px;
  }
}
