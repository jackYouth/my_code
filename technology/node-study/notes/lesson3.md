# node学习笔记
### lesson 3

##### uri & url
uri: 统一资源标识符，偏重标识，表示的是一个字符串格式规范，是一种概念上的定义，url可以说是uri的子集
url: 统一资源定位符，偏重定位。url只能使用字母，数字以及某些标点符号。不能使用汉字，汉字需要编码才行


##### url
node自带url方法，其下又细分出三个方法：parse，formate
* parse
有三个参数，第一个地址，第二个是否使用querystring方法解析地址的query，默认是false，第三个是否支持解析无协议标识的地址，默认是false
```js
url.parse('http://nodejs.cn:9000/api/url.html?name=syd&age=18#url_url_username')
// 解析结果：
{
  protocol: 'http:',
  slashes: true,
  auth: null,
  host: 'nodejs.cn:9000',
  port: '9000',
  hostname: 'nodejs.cn',
  hash: '#url_url_username',
  search: '?name=syd&age=18',
  query: 'name=syd&age=18',
  pathname: '/api/url.html',
  path: '/api/url.html?name=syd&age=18',
  href: 'http://nodejs.cn:9000/api/url.html?name=syd&age=18#url_url_username'
}
```
其中：
protocol: 表示底层实用的协议，是http还是ftp
slashes : 表示是否有协议的双斜线
host    : 表示ip地址，也可以叫域名
port    : 当前使用的端口，默认是8080
hostname: 主机名
hash    : 当前的锚点，#号后面，表示定位到页面的哪个部分
search  : 表示查询字符串参数
query   : ? 后面，查询的内容
pathname: 访问资源的路径名
path    : 访问资源的路径

这里如果添加了第二个参数，并设为true，那么query就会变成一个对象 query: { name: 'syd', age: '18' }
对于地址：//nodejs.cn:9000/api/url.html， 这里如果不添第三个参数，那么hostname和其之前的参数值就都是null，如果第三个参数设置为true，那么进protocol值为null，不会正常解析
* formate
将上述parse地址后的对象，这种格式的对象，格式化为url地址
* rosolve
用于将多个字符串参数，拼接成一个完整的字符串，作为url

##### querystring
* stringfy
将对象，解析成query的形式
const obj = {
  name: 'S.Y.D',
  info: ['18', 150],
  text: ''
}
命令行中，开启node模式后：
querystring.stringfy(obj)
结果是：'name=S.Y.D&info=18&info=150&text='
sringfy有三个参数，第一个是obj，第二个是string，用来设置key之间的连接符，默认是&。第三个是string，用来设置key和value之间的连接符，默认是=。
* parse
将query解析成对象
有四个参数，第一个是string，第二个是string，根据这个连接符识别不同的key，第三个是string，根据这个连接符识别key和value之间。
* escape
将汉字进行编译
* unescape
将编译过的汉字，解析成汉字

### lesson 4
##### http
http其实就是一个协议，而智能终端之间的通信，其前提就是要遵循这个协议。
http请求的过程：
1， dns进行域名解析
2， tcp连接的三次握手，进行通信确认
3， 客户端通过http请求，把一些请求参数发给服务端
4， 服务端接收到请求，由后端根据请求的路径和参数做出一些处理后 返回一些数据给服务端（访问一个网站，先返回的一般都是html文件）
5， 客户端接收到这个html文件之后，开始解析渲染，同时里面的css，js，图片等相关静态资源也都是一个个静态资源，需要经历以上的四步
6， html，css，js，图片接收完毕以后，就开始渲染页面了，页面渲染完毕，就会呈现出一个完整的页面给客户了。
* dns进行域名解析
共分五级，如果上一级没有找到或是缓存失效，就往下一级继续寻找。
浏览器缓存中找。
操作系统缓存中找。
宽带运营商服务器缓存中找。
如果上述都没有找到，那么宽带运营商就会向根域发起dns的迭代解析请求，如www.boluome.com
根域下面寻找。
com域下寻找。
boluome域下寻找，ip地址一般都是在这个时候进行定义的，所以这里肯定就能找到。这时宽带运营商拿到以后就会返给浏览器，并保存在自己的的dns缓存中。

* tcp连接的三次握手
客户端询问服务器：你能听懂我说话不？咱们唠会儿
服务端回复：可以，唠吧
客户端：那行，咱们开始唠吧
这样，tcp连接算是建立完成了，可以进行http请求

##### http请求
* 状态码
1xx，2xx，3xx，4xx，5xx
1xx表示请求已发送，继续处理
2xx表示请求成功，且已处理
3xx表示需要重定向，请求如果需要正确处理，需要进一步的操作，如跳转
4xx表示请求错误，如：语法错误，或无法获取
5xx表示服务器端错误

200: 请求成功
400: 请求语法错误，服务端无法识别
401: 请求未授权
403: 服务端接到请求，但是拒绝服务，可能是因为没有权限
404: 没找到，请求资源不存在
500: 服务端发生了一个不可预期的错误
503: 服务端暂时还不能处理请求，要过段时间才行。


### nodeJs中的http模块
##### 功能
* 支持更多的特性（对客户端的请求和服务端的响应的头信息和状态码的获取和设置）
* 不缓存请求与响应
* 处理流操作（整套http的api，只处理流相关的操作，并不负责信息解析，可以把信息解析成请求头和请求体，但并不会再去处理实际的请求头和请求体里的内容）

##### 概念进阶
* 什么是回调
  作为参数，传入一个函数中的 函数，就称为回调函数。这样，我们就可以在一个函数外部自定义一个处理程序，这个程序会对另一个函数中获取到的数据进行处理。
* 什么是同步异步
  js代码的执行是同步执行的，同步执行的意思，就是所有的代码，从上到下，一步一步的执行。
  像定时器，事件，代理 等操作，是异步执行的，当执行到他的时候，就会分出一个线程，去处理接下来的数据。
* 什么是单线程／多线程
* 什么是阻塞／非阻塞
* 什么是I/O
* 什么是事件
* 什么是事件驱动
* 什么是基于事件驱动的回调
* 什么是事件循环

单线程的nodejs中，可以通过回调函数的形式，来进行异步编程，达到非阻塞的效果。







------
